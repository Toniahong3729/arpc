<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>GIGABYTE STEALTH AR</title>
    <!-- åŸºç¤ A-Frame -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <!-- åŸºç¤ AR.js -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <!-- UI æ¨£å¼ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');
        
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            overflow: hidden; font-family: 'Orbitron', sans-serif; background: #000; 
            position: fixed;
            left: 0; top: 0;
        }

        /* çµ•å°å¼·åˆ¶å…¨è¢å¹•ï¼šè§£æ±ºç•«é¢ç¸®å°èˆ‡å³å´é®æ“‹ */
        #scene-container, a-scene, .a-canvas, video {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            margin: 0 !important;
            padding: 0 !important;
            object-fit: cover !important;
        }

        video {
            z-index: -10 !important;
        }

        #landing-page {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, #1a1a1a 0%, #000 100%);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            z-index: 1000; transition: opacity 0.5s ease;
        }

        .btn-aorus { 
            background: linear-gradient(135deg, #ff6600 0%, #cc5200 100%); 
            color: white; padding: 16px 40px; border-radius: 50px;
            font-weight: bold; text-transform: uppercase; letter-spacing: 2px;
            box-shadow: 0 0 20px rgba(255, 102, 0, 0.4); border: none; cursor: pointer;
        }

        .ui-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 100;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }

        .aorus-panel { 
            background: rgba(0, 0, 0, 0.85); border: 1px solid #ff6600; 
            color: white; padding: 25px; border-radius: 15px; text-align: center;
            pointer-events: auto; backdrop-filter: blur(10px); width: 85%; max-width: 360px;
            transition: all 0.5s ease;
        }

        /* ç¸®å°å¾Œçš„æç¤ºç‹€æ…‹ */
        .aorus-panel.minimized {
            transform: translateY(-30vh) scale(0.7);
            opacity: 0.6;
            pointer-events: none;
        }

        #ar-instruction {
            position: absolute; bottom: 40px; width: 85%;
            background: rgba(0,0,0,0.85); border: 1px solid #ff6600;
            color: #ff6600; padding: 12px; border-radius: 30px;
            font-size: 13px; text-align: center; z-index: 50;
            box-shadow: 0 0 15px rgba(255, 102, 0, 0.2);
        }

        .hidden { display: none !important; }

        /* æƒæå¼•å°æ¡† */
        .scan-guide {
            position: absolute;
            width: 250px; height: 250px;
            border: 2px solid rgba(255, 102, 0, 0.5);
            border-radius: 20px;
            display: flex; align-items: center; justify-content: center;
            z-index: 20;
        }
        .scan-guide::before, .scan-guide::after {
            content: ''; position: absolute; width: 40px; height: 40px; border: 4px solid #ff6600;
        }
        .scan-guide::before { top: -2px; left: -2px; border-right: 0; border-bottom: 0; border-radius: 15px 0 0 0; }
        .scan-guide::after { bottom: -2px; right: -2px; border-left: 0; border-top: 0; border-radius: 0 0 15px 0; }

        .marker-sample {
            width: 80px; height: 80px; background: white; border: 8px solid black;
            display: flex; align-items: center; justify-content: center;
            margin: 0 auto 10px;
        }
        .marker-sample span { color: black; font-weight: bold; font-size: 14px; font-family: sans-serif; }

        #error-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 2000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            padding: 30px; text-align: center; color: white;
        }

        .a-enter-vr { display: none !important; }
    </style>
</head>
<body>

    <!-- éŒ¯èª¤æç¤ºå±¤ -->
    <div id="error-overlay" class="hidden">
        <div class="text-[#ff6600] text-5xl mb-6">âš ï¸</div>
        <h2 class="text-xl font-bold mb-4">ç›¸æ©Ÿå•Ÿå‹•ç•°å¸¸</h2>
        <p id="error-text" class="text-sm text-gray-400 mb-8">è«‹å˜—è©¦åœ¨ Safari æˆ– Chrome ä¸­é–‹å•Ÿæ­¤ç¶²é ã€‚</p>
        <button onclick="location.reload()" class="btn-aorus text-sm">é‡æ–°å˜—è©¦</button>
    </div>

    <!-- å•Ÿå‹•ä¸»ç•«é¢ -->
    <div id="landing-page">
        <div class="text-center px-10">
            <div class="mb-8">
                <div class="w-20 h-20 bg-[#ff6600] rounded-full mx-auto flex items-center justify-center shadow-2xl shadow-[#ff6600]/40">
                    <span class="text-2xl font-black text-black">GS</span>
                </div>
            </div>
            <h1 class="text-3xl font-bold text-white mb-2">STEALTH <span class="text-[#ff6600]">AR</span></h1>
            <p class="text-gray-400 text-xs tracking-widest mb-12 uppercase">GIGABYTE INTERACTIVE</p>
            
            <button id="main-start-btn" onclick="requestCameraAndInit()" class="btn-aorus">
                é€²å…¥ AR æŒ‘æˆ°
            </button>
            <p class="mt-8 text-[10px] text-gray-500 font-sans">v2.2 - ä»‹é¢å„ªåŒ–ç‰ˆ</p>
        </div>
    </div>

    <!-- UI é‡ç–Šå±¤ -->
    <div id="ui-container" class="ui-overlay hidden">
        
        <!-- æƒæå¼•å°æ¡† (å¹«åŠ©å°æº–) -->
        <div id="scan-viewfinder" class="scan-guide">
            <div class="w-full h-0.5 bg-[#ff6600]/30 animate-bounce"></div>
        </div>

        <div id="ar-instruction">è«‹å°‹æ‰¾ä¸¦å°æº– Hiro Marker</div>

        <!-- æƒææç¤ºæ¡† -->
        <div id="start-panel" class="aorus-panel">
            <h2 class="text-[#ff6600] font-bold mb-3">æº–å‚™æƒæ</h2>
            <div class="marker-sample">
                <span>HIRO</span>
            </div>
            <p class="text-xs text-gray-300 mb-4 font-sans">è«‹å°‡é¡é ­å°æº–é›»è…¦ä¸Šçš„<br><strong>Hiro Marker (å¦‚ä¸Šåœ–)</strong></p>
            <div class="text-[10px] text-[#ff6600] animate-pulse">æ­£åœ¨æœå°‹ä¸­...</div>
        </div>

        <!-- å•ç­”é¢æ¿ -->
        <div id="quiz-panel" class="aorus-panel hidden text-left">
            <div id="quiz-progress" class="text-[10px] text-[#ff6600] mb-2 font-bold text-right">Q: 1 / 5</div>
            <h2 id="question-text" class="text-base font-bold mb-6"></h2>
            <div id="options-container" class="grid gap-3"></div>
        </div>

        <!-- æˆåŠŸå‹³ç«  -->
        <div id="medal-panel" class="aorus-panel hidden">
            <div class="text-5xl mb-4">ğŸ†</div>
            <h2 class="text-2xl font-bold text-[#ff6600] mb-2">æŒ‘æˆ°å®Œæˆ</h2>
            <div class="bg-[#ff6600]/10 py-4 border border-[#ff6600]/30 rounded-lg mb-6 mt-4">
                <span class="text-2xl font-black tracking-widest text-[#ff6600]">STEALTH-PRO</span>
            </div>
            <button onclick="location.reload()" class="text-xs text-gray-500 underline">é‡æ–°æŒ‘æˆ°</button>
        </div>
    </div>

    <div id="scene-container"></div>

    <script>
        const questions = [
            { q: "æŠ€å˜‰ STEALTH ç³»åˆ—æœ€ä¸»è¦çš„è¨­è¨ˆæ ¸å¿ƒæ˜¯ä»€éº¼ï¼Ÿ", o: ["ç„¡ç·šå‚³è¼¸", "èƒŒæ’å¼ä»‹é¢è¨­è¨ˆ", "è¶…å¤§å‹æ•£ç†±æ‰‡", "å…¨é€æ˜å¤–æ®¼"], a: 1 },
            { q: "èƒŒæ’å¼è¨­è¨ˆå¦‚ä½•å½±éŸ¿é›»è…¦æ•£ç†±ï¼Ÿ", o: ["å¢åŠ é¢¨æ‰‡è½‰é€Ÿ", "é™ä½é›»åŠ›æ¶ˆè€—", "ç†ç·šæ•´æ½”ä¸¦å„ªåŒ–é¢¨é“", "å¢åŠ æ©Ÿæ®¼é‡é‡"], a: 2 },
            { q: "STEALTH ç³»åˆ—é€šå¸¸æ­é…å“ªå€‹é«˜ç«¯å­å“ç‰Œï¼Ÿ", o: ["AORUS", "AERO", "EAGLE", "GAMING"], a: 0 },
            { q: "ä½¿ç”¨ STEALTH æ–¹æ¡ˆé€²è¡Œçµ„è£ï¼Œä¸»è¦èƒ½è§£æ±ºä»€éº¼ç—›é»ï¼Ÿ", o: ["ç†ç·šç¹é›œèˆ‡è¦–è¦ºæ··äº‚", "ç¡¬ç¢Ÿç©ºé–“ä¸è¶³", "é¡¯ç¤ºå¡å¤ªé‡", "è¢å¹•è§£æåº¦ä¸è¶³"], a: 0 },
            { q: "STEALTH ç³»åˆ—çš„è¦–è¦ºç‰¹é»ç‚ºä½•ï¼Ÿ", o: ["å……æ»¿å¤§é‡ RGB", "å¹¾ä¹çœ‹ä¸åˆ°å¤–éœ²ç·šæ", "æ©Ÿæ®¼å‘ˆç¾å…¨é»ƒè‰²", "éœ€è¦ä½¿ç”¨æ°´å†·"], a: 1 }
        ];

        let currentQuestion = 0;
        let markerFound = false;

        async function requestCameraAndInit() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: 'environment', width: { ideal: 1280 }, height: { ideal: 720 } } 
                });
                stream.getTracks().forEach(track => track.stop());
                initAR();
            } catch (err) {
                document.getElementById('error-overlay').classList.remove('hidden');
            }
        }

        function initAR() {
            document.getElementById('landing-page').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('landing-page').classList.add('hidden');
                document.getElementById('ui-container').classList.remove('hidden');
                
                // 3 ç§’å¾Œç¸®å°æç¤ºæ¡†ï¼Œè®“ç”¨æˆ¶çœ‹æ¸…æ¥šç›¸æ©Ÿç•«é¢
                setTimeout(() => {
                    if(!markerFound) {
                        document.getElementById('start-panel').classList.add('minimized');
                    }
                }, 3000);
            }, 500);

            const sceneHTML = `
                <a-scene 
                    embedded 
                    loading-screen="enabled: false"
                    arjs="sourceType: webcam; debugUIEnabled: false; displayWidth: ${window.innerWidth}; displayHeight: ${window.innerHeight};" 
                    renderer="antialias: true; alpha: true;" 
                    vr-mode-ui="enabled: false">
                    
                    <a-marker preset="hiro" id="stealth-marker">
                        <a-entity position="0 0.5 0" animation="property: rotation; to: 0 360 0; loop: true; dur: 4000; easing: linear">
                            <a-box position="0 0 0" material="color: #000; opacity: 0.8" scale="1 1 1">
                                <a-box position="0 0 0" scale="0.9 0.9 0.9" material="color: #111; emissive: #ff6600; emissiveIntensity: 0.7"></a-box>
                            </a-box>
                            <a-text value="STEALTH ACTIVE" position="0 1.2 0" align="center" color="#ff6600" width="3"></a-text>
                        </a-entity>
                    </a-marker>
                    
                    <a-entity camera></a-entity>
                </a-scene>
            `;
            document.getElementById('scene-container').innerHTML = sceneHTML;

            // å¼·åˆ¶ä¿®æ­£ä½ˆå±€ï¼Œç¢ºä¿ä¸ç•™é»‘é‚Šæˆ–è¢«æ“ å£“
            const fix = () => {
                const els = ['video', '.a-canvas'];
                els.forEach(selector => {
                    const el = document.querySelector(selector);
                    if (el) {
                        el.style.width = window.innerWidth + 'px';
                        el.style.height = window.innerHeight + 'px';
                        el.style.position = 'fixed';
                        el.style.top = '0';
                        el.style.left = '0';
                    }
                });
            };
            
            setInterval(fix, 1000);

            setTimeout(() => {
                const marker = document.querySelector('#stealth-marker');
                if (marker) {
                    marker.addEventListener('markerFound', () => {
                        if(!markerFound) triggerQuiz();
                    });
                }
            }, 2000);
        }

        function triggerQuiz() {
            markerFound = true;
            document.getElementById('ar-instruction').innerText = "åµæ¸¬æˆåŠŸï¼";
            document.getElementById('ar-instruction').style.color = "#4CAF50";
            document.getElementById('scan-viewfinder').classList.add('hidden');
            
            setTimeout(() => {
                document.getElementById('start-panel').classList.add('hidden');
                document.getElementById('ar-instruction').classList.add('hidden');
                document.getElementById('quiz-panel').classList.remove('hidden');
                document.getElementById('quiz-panel').classList.remove('minimized');
                loadQuestion();
            }, 800);
        }

        function loadQuestion() {
            const q = questions[currentQuestion];
            document.getElementById('quiz-progress').innerText = `Q: ${currentQuestion + 1} / ${questions.length}`;
            document.getElementById('question-text').innerText = q.q;
            const container = document.getElementById('options-container');
            container.innerHTML = '';
            
            q.o.forEach((option, index) => {
                const btn = document.createElement('button');
                btn.className = "w-full text-left p-4 rounded-lg bg-white/10 border border-white/20 text-white text-sm active:bg-[#ff6600] transition-all font-sans";
                btn.innerText = option;
                btn.onclick = () => {
                    if (index === q.a) {
                        btn.classList.add('bg-green-600', 'border-green-600');
                        setTimeout(() => {
                            currentQuestion++;
                            if (currentQuestion < questions.length) loadQuestion();
                            else showMedal();
                        }, 500);
                    } else {
                        btn.classList.add('bg-red-600', 'border-red-600');
                        setTimeout(() => btn.classList.remove('bg-red-600', 'border-red-600'), 500);
                    }
                };
                container.appendChild(btn);
            });
        }

        function showMedal() {
            document.getElementById('quiz-panel').classList.add('hidden');
            document.getElementById('medal-panel').classList.remove('hidden');
        }
    </script>
</body>
</html>
